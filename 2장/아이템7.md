# 다 쓴 객체 참조를 해제하라

자바는 가비지 컬렉터를 가지고 있어서 메모리 관리에 대해 개발자가 크게 신경써야하는 경우는 없지만 아예 신경을 쓰지 않으면 안된다.

## 가비지 컬렉션에서의 메모리 누수

- 가비지 컬렉터는 어떤 객체에 대한 참조를 하나 살려두면 그 객체뿐 아니라 그 객체가 참조하고 있는 다른 객체들을 회수해가지 못한다.
- 따라서 객체를 다 사용하고 더 이상 사용할 일이 없다면 null 처리를 하면된다.
- 하지만 null처리는 코드를 지저분하게 만들고, 잘못해서 null 처리한 객체에 접근하면 NPE(NullPointException)이 발생한다. 따라서 정말 예외적인 경우에만 해야한다.

### 자기 메모리를 직접 관리하는 클래스라면 프로그래머는 항시 메모리 누수에 주의해야 한다.

## 캐시 역시 메모리 누수를 일으키는 주범이다.

- 객체 참조를 캐시에 넣고 다 사용한 뒤에도 객체를 그대로 놔두면 이 또한 메모리를 잡아먹는 요소가 된다.
- 캐시 외부에서 key를 참조하는 동안만 엔트리가 살아 있는 캐시가 필요한 상황이라면 WeakHashMap을 사용하여 캐시를 만들자.
- 캐시는 시간이 지날 수록 엔트리의 가치를 떨어뜨리는 방식을 사용하여 캐시의 엔트리를 청소하기도 한다.
