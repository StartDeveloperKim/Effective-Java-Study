# 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라.

프로젝트를 진행하다보면 많은 클래스가 하나 이상의 클래스 또는 자원에 의존하고 있다. 이 자원이 뭔가에 따라 해당 클래스의 동작이 달라진다면 이 클래스는 정적 유틸리티 클래스나 싱글턴 방식은 적합하지 않다. 

```java
public class Payment {
	private static final Card card = ...;
	private Payment(...){}
	
	...
}
```

위의 코드 예시를 보면 결제할 때 카드로 결제할 수 있지만 클래스 내부에서 Card에 대한 인스턴스를 생성하다보니 한 종류의 카드만 결제가 가능하다,

그래서 이 때 사용하는 것이 의존 객체 주입이다.

## 의존 객체 주입?

말은 엄청 거창하지만 그렇게 어려운 것이 아니다. **객체를 생성할 때 이 객체가 의존하고 있는 다른 객체를 외부에서 파라미터 방식으로 전달하는 것이다.**

```java
public class Payment {
	private static final Card card;
	public Payment(Card card){
		this.card = card;
	}
	
	...
}
```

위의 코드를 보면 생성자를 호출할 때 Card 인스턴스를 외부에서 넘겨준다. 그러면 여러카드 결제에 대해 유연하게 대응이 가능하다.

## 장점

- 생성자 이외에 해당 객체에 대한 변경가능성(setter 또는 일반 설정 함수)이 없다면 불변성을 보장한다.
- 여러 클라이언트가 의존 객체들을 안심하고 공유할 수 있기도 한다.
- 클래스의 재사용성, 테스트 용이성을 개선해준다.
